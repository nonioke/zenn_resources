{"last_node_id":76,"last_link_id":112,"nodes":[{"id":59,"type":"HyVideoBlockSwap","pos":{"0":-643.1146240234375,"1":-82.39257049560547},"size":{"0":315,"1":130},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"block_swap_args","type":"BLOCKSWAPARGS","links":[98],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoBlockSwap"},"widgets_values":[20,10,false,false]},{"id":69,"type":"Note","pos":{"0":-630.0859375,"1":-265.2142333984375},"size":{"0":275.66656494140625,"1":85.13335418701172},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["block swap is a manual way to do cpu offloading, use this to trade speed with memory use"],"color":"#432","bgcolor":"#653"},{"id":71,"type":"Note","pos":{"0":-585.5635375976562,"1":95.25086975097656},"size":{"0":275.66656494140625,"1":85.13335418701172},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Use sageattention if you can, flash attention if you can't... last resort use sdpa"],"color":"#432","bgcolor":"#653"},{"id":70,"type":"Note","pos":{"0":250,"1":-517},"size":{"0":299.13330078125,"1":65.1333236694336},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Enhance a video weight should be relative to the video lenght, if you get noisy results it's too strong"],"color":"#432","bgcolor":"#653"},{"id":1,"type":"HyVideoModelLoader","pos":{"0":-285,"1":-102.5894546508789},"size":{"0":426.1773986816406,"1":242},"flags":{},"order":15,"mode":0,"inputs":[{"name":"compile_args","type":"COMPILEARGS","link":null,"shape":7},{"name":"block_swap_args","type":"BLOCKSWAPARGS","link":98,"shape":7},{"name":"lora","type":"HYVIDLORA","link":112,"shape":7}],"outputs":[{"name":"model","type":"HYVIDEOMODEL","links":[104],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoModelLoader"},"widgets_values":["skyreels_hunyuan_i2v_bf16.safetensors","bf16","fp8_e4m3fn","offload_device","sdpa",false,true]},{"id":60,"type":"ColorMatch","pos":{"0":757,"1":256},"size":{"0":315,"1":102},"flags":{},"order":19,"mode":0,"inputs":[{"name":"image_ref","type":"IMAGE","link":84},{"name":"image_target","type":"IMAGE","link":83}],"outputs":[{"name":"image","type":"IMAGE","links":[102],"slot_index":0}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl",1]},{"id":34,"type":"VHS_VideoCombine","pos":{"0":1184,"1":-497},"size":[802.6394653320312,310],"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":102},{"name":"audio","type":"AUDIO","link":null,"shape":7},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"shape":7},{"name":"vae","type":"VAE","link":null,"shape":7}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"HunyuanVideo_skyreel_I2V","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"HunyuanVideo_skyreel_I2V_00001.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":24,"workflow":"HunyuanVideo_skyreel_I2V_00036.png","fullpath":"N:\\AI\\ComfyUI\\output\\HunyuanVideo_skyreel_I2V_00036.mp4"},"muted":false}}},{"id":43,"type":"HyVideoEncode","pos":{"0":-488,"1":483},"size":{"0":315,"1":198},"flags":{},"order":16,"mode":0,"inputs":[{"name":"vae","type":"VAE","link":54},{"name":"image","type":"IMAGE","link":63}],"outputs":[{"name":"samples","type":"LATENT","links":[106],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoEncode"},"widgets_values":[false,64,256,true,0.04,1]},{"id":45,"type":"ImageResizeKJ","pos":{"0":-958,"1":240},"size":{"0":315,"1":266},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":56},{"name":"get_image_size","type":"IMAGE","link":null,"shape":7},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"shape":7},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"shape":7}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[63,84],"slot_index":0},{"name":"width","type":"INT","links":[108],"slot_index":1},{"name":"height","type":"INT","links":[109],"slot_index":2}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[960,960,"lanczos",true,2,0,0,"center"]},{"id":16,"type":"DownloadAndLoadHyVideoTextEncoder","pos":{"0":-545,"1":240},"size":{"0":441,"1":202},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"hyvid_text_encoder","type":"HYVIDTEXTENCODER","links":[35]}],"properties":{"Node name for S&R":"DownloadAndLoadHyVideoTextEncoder"},"widgets_values":["Kijai/llava-llama-3-8b-text-encoder-tokenizer","openai/clip-vit-large-patch14","fp16",false,2,"disabled","offload_device"]},{"id":58,"type":"HyVideoCFG","pos":{"0":-1026,"1":747},"size":{"0":400,"1":200},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"hyvid_cfg","type":"HYVID_CFG","links":[90],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoCFG"},"widgets_values":["chaotic, distortion, morphing",6,0,0.5,false]},{"id":64,"type":"HyVideoEnhanceAVideo","pos":{"0":-145,"1":-324},"size":{"0":352.79998779296875,"1":154},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"feta_args","type":"FETAARGS","links":[107],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoEnhanceAVideo"},"widgets_values":[3,true,true,0,1]},{"id":76,"type":"Note","pos":{"0":-1085,"1":-361},"size":{"0":283.9305725097656,"1":76.4114990234375},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["open this lora, reduce sampler step, faster"],"color":"#432","bgcolor":"#653"},{"id":44,"type":"LoadImage","pos":{"0":-1312,"1":216},"size":{"0":315,"1":314.0000305175781},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[56],"slot_index":0},{"name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1740056864737_3582918_m.jpg","image"]},{"id":5,"type":"HyVideoDecode","pos":{"0":729,"1":-286},"size":{"0":345.4285888671875,"1":150},"flags":{},"order":18,"mode":0,"inputs":[{"name":"vae","type":"VAE","link":6},{"name":"samples","type":"LATENT","link":110}],"outputs":[{"name":"images","type":"IMAGE","links":[83],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoDecode"},"widgets_values":[true,64,192,false]},{"id":63,"type":"Note","pos":{"0":-226,"1":-557},"size":{"0":329.93341064453125,"1":58},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["https://huggingface.co/Kijai/HunyuanVideo_comfy/blob/main/hunyuan_video_vae_bf16.safetensors"],"color":"#432","bgcolor":"#653"},{"id":7,"type":"HyVideoVAELoader","pos":{"0":-250,"1":-451},"size":{"0":379.166748046875,"1":82},"flags":{},"order":10,"mode":0,"inputs":[{"name":"compile_args","type":"COMPILEARGS","link":null,"shape":7}],"outputs":[{"name":"vae","type":"VAE","links":[6,54],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoVAELoader"},"widgets_values":["hunyuan_video_vae_bf16.safetensors","bf16"]},{"id":62,"type":"Note","pos":{"0":-305,"1":-197},"size":{"0":393.7334289550781,"1":58},"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["https://huggingface.co/Kijai/SkyReels-V1-Hunyuan_comfy/blob/main/skyreels_hunyuan_i2v_bf16.safetensors"],"color":"#432","bgcolor":"#653"},{"id":75,"type":"LoadHunyuanLoraFromHF","pos":{"0":-1127,"1":-233},"size":{"0":315,"1":126},"flags":{},"order":12,"mode":0,"inputs":[{"name":"prev_lora","type":"HYVIDLORA","link":null,"shape":7},{"name":"blocks","type":"SELECTEDBLOCKS","link":null,"shape":7}],"outputs":[{"name":"lora","type":"HYVIDLORA","links":[112]}],"properties":{"Node name for S&R":"LoadHunyuanLoraFromHF"},"widgets_values":["spacepxl/skyreels-i2v-smooth-lora","skyreels-i2v-smooth-lora-test-00000350.safetensors",0.7000000000000001]},{"id":30,"type":"HyVideoTextEncode","pos":{"0":-543,"1":711},"size":{"0":437.3100280761719,"1":240.78936767578125},"flags":{},"order":13,"mode":0,"inputs":[{"name":"text_encoders","type":"HYVIDTEXTENCODER","link":35},{"name":"custom_prompt_template","type":"PROMPT_TEMPLATE","link":null,"shape":7},{"name":"clip_l","type":"CLIP","link":null,"shape":7},{"name":"hyvid_cfg","type":"HYVID_CFG","link":90,"shape":7}],"outputs":[{"name":"hyvid_embeds","type":"HYVIDEMBEDS","links":[105],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoTextEncode"},"widgets_values":["FPS-24, woman yalling yahoo and waving hand","bad quality video","video"]},{"id":73,"type":"HyVideoSampler","pos":{"0":356,"1":-76},"size":{"0":330,"1":438},"flags":{},"order":17,"mode":0,"inputs":[{"name":"model","type":"HYVIDEOMODEL","link":104},{"name":"hyvid_embeds","type":"HYVIDEMBEDS","link":105},{"name":"samples","type":"LATENT","link":null,"shape":7},{"name":"image_cond_latents","type":"LATENT","link":106,"shape":7},{"name":"stg_args","type":"STGARGS","link":null,"shape":7},{"name":"context_options","type":"HYVIDCONTEXT","link":null,"shape":7},{"name":"feta_args","type":"FETAARGS","link":107,"shape":7},{"name":"teacache_args","type":"TEACACHEARGS","link":null,"shape":7},{"name":"width","type":"INT","link":108,"widget":{"name":"width"}},{"name":"height","type":"INT","link":109,"widget":{"name":"height"}}],"outputs":[{"name":"samples","type":"LATENT","links":[110],"slot_index":0}],"properties":{"Node name for S&R":"HyVideoSampler"},"widgets_values":[512,512,49,30,6,9,15,"fixed",true,1,"SDE-DPMSolverMultistepScheduler"]}],"links":[[6,7,0,5,0,"VAE"],[35,16,0,30,0,"HYVIDTEXTENCODER"],[54,7,0,43,0,"VAE"],[56,44,0,45,0,"IMAGE"],[63,45,0,43,1,"IMAGE"],[83,5,0,60,1,"IMAGE"],[84,45,0,60,0,"IMAGE"],[90,58,0,30,3,"HYVID_CFG"],[98,59,0,1,1,"BLOCKSWAPARGS"],[102,60,0,34,0,"IMAGE"],[104,1,0,73,0,"HYVIDEOMODEL"],[105,30,0,73,1,"HYVIDEMBEDS"],[106,43,0,73,3,"LATENT"],[107,64,0,73,6,"FETAARGS"],[108,45,1,73,8,"INT"],[109,45,2,73,9,"INT"],[110,73,0,5,1,"LATENT"],[112,75,0,1,2,"HYVIDLORA"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.8140274938684013,"offset":[263.2157659579518,423.9627089053737]},"node_versions":{"ComfyUI-HunyuanVideoWrapper":"e490745002454446b514e46390333b663b4bf7ee","ComfyUI-KJNodes":"095c8d4b526ba3c1f12fd9dd1d7f3540c6a11358","comfy-core":"0.3.14","ComfyUI-VideoHelperSuite":"c47b10ca1798b4925ff5a5f07d80c51ca80a837d"},"VHS_latentpreview":true,"VHS_latentpreviewrate":0},"version":0.4}